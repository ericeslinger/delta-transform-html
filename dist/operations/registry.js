"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.add = add;
exports.listFormats = listFormats;
exports.get = get;
exports.checkPriorities = checkPriorities;
var registry = {};
var formatList = [];

function sortRegistry() {
  formatList = Object.keys(registry).sort(function (a, b) {
    return registry[b].priority - registry[a].priority;
  }).map(function (n) {
    return registry[n];
  });
}

function add(name, format) {
  registry[name] = format;
  sortRegistry();
}

function listFormats() {
  return formatList;
}

function get(name) {
  return registry[name];
}

function checkPriorities() {
  var seen = {};
  Object.keys(registry).forEach(function (key) {
    if (seen[registry[key].priority]) {
      console.log("ERROR: conflict between " + key + " and " + seen[registry[key].priority]);
    }
    seen[registry[key].priority] = key;
  });
}
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9wZXJhdGlvbnMvcmVnaXN0cnkuanMiXSwibmFtZXMiOlsiYWRkIiwibGlzdEZvcm1hdHMiLCJnZXQiLCJjaGVja1ByaW9yaXRpZXMiLCJyZWdpc3RyeSIsImZvcm1hdExpc3QiLCJzb3J0UmVnaXN0cnkiLCJPYmplY3QiLCJrZXlzIiwic29ydCIsImEiLCJiIiwicHJpb3JpdHkiLCJtYXAiLCJuIiwibmFtZSIsImZvcm1hdCIsInNlZW4iLCJmb3JFYWNoIiwia2V5IiwiY29uc29sZSIsImxvZyJdLCJtYXBwaW5ncyI6Ijs7Ozs7UUFTZ0JBLEcsR0FBQUEsRztRQUtBQyxXLEdBQUFBLFc7UUFJQUMsRyxHQUFBQSxHO1FBSUFDLGUsR0FBQUEsZTtBQXRCaEIsSUFBTUMsV0FBVyxFQUFqQjtBQUNBLElBQUlDLGFBQWEsRUFBakI7O0FBRUEsU0FBU0MsWUFBVCxHQUF3QjtBQUN0QkQsZUFBYUUsT0FBT0MsSUFBUCxDQUFZSixRQUFaLEVBQ1pLLElBRFksQ0FDUCxVQUFDQyxDQUFELEVBQUlDLENBQUo7QUFBQSxXQUFVUCxTQUFTTyxDQUFULEVBQVlDLFFBQVosR0FBdUJSLFNBQVNNLENBQVQsRUFBWUUsUUFBN0M7QUFBQSxHQURPLEVBRVpDLEdBRlksQ0FFUixVQUFDQyxDQUFEO0FBQUEsV0FBT1YsU0FBU1UsQ0FBVCxDQUFQO0FBQUEsR0FGUSxDQUFiO0FBR0Q7O0FBRU0sU0FBU2QsR0FBVCxDQUFhZSxJQUFiLEVBQW1CQyxNQUFuQixFQUEyQjtBQUNoQ1osV0FBU1csSUFBVCxJQUFpQkMsTUFBakI7QUFDQVY7QUFDRDs7QUFFTSxTQUFTTCxXQUFULEdBQXVCO0FBQzVCLFNBQU9JLFVBQVA7QUFDRDs7QUFFTSxTQUFTSCxHQUFULENBQWFhLElBQWIsRUFBbUI7QUFDeEIsU0FBT1gsU0FBU1csSUFBVCxDQUFQO0FBQ0Q7O0FBRU0sU0FBU1osZUFBVCxHQUEyQjtBQUNoQyxNQUFNYyxPQUFPLEVBQWI7QUFDQVYsU0FBT0MsSUFBUCxDQUFZSixRQUFaLEVBQ0NjLE9BREQsQ0FDUyxVQUFDQyxHQUFELEVBQVM7QUFDaEIsUUFBSUYsS0FBS2IsU0FBU2UsR0FBVCxFQUFjUCxRQUFuQixDQUFKLEVBQWtDO0FBQ2hDUSxjQUFRQyxHQUFSLDhCQUF1Q0YsR0FBdkMsYUFBa0RGLEtBQUtiLFNBQVNlLEdBQVQsRUFBY1AsUUFBbkIsQ0FBbEQ7QUFDRDtBQUNESyxTQUFLYixTQUFTZSxHQUFULEVBQWNQLFFBQW5CLElBQStCTyxHQUEvQjtBQUNELEdBTkQ7QUFPRCIsImZpbGUiOiJvcGVyYXRpb25zL3JlZ2lzdHJ5LmpzIiwic291cmNlc0NvbnRlbnQiOlsiY29uc3QgcmVnaXN0cnkgPSB7fTtcbmxldCBmb3JtYXRMaXN0ID0gW107XG5cbmZ1bmN0aW9uIHNvcnRSZWdpc3RyeSgpIHtcbiAgZm9ybWF0TGlzdCA9IE9iamVjdC5rZXlzKHJlZ2lzdHJ5KVxuICAuc29ydCgoYSwgYikgPT4gcmVnaXN0cnlbYl0ucHJpb3JpdHkgLSByZWdpc3RyeVthXS5wcmlvcml0eSlcbiAgLm1hcCgobikgPT4gcmVnaXN0cnlbbl0pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gYWRkKG5hbWUsIGZvcm1hdCkge1xuICByZWdpc3RyeVtuYW1lXSA9IGZvcm1hdDtcbiAgc29ydFJlZ2lzdHJ5KCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsaXN0Rm9ybWF0cygpIHtcbiAgcmV0dXJuIGZvcm1hdExpc3Q7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXQobmFtZSkge1xuICByZXR1cm4gcmVnaXN0cnlbbmFtZV07XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja1ByaW9yaXRpZXMoKSB7XG4gIGNvbnN0IHNlZW4gPSB7fTtcbiAgT2JqZWN0LmtleXMocmVnaXN0cnkpXG4gIC5mb3JFYWNoKChrZXkpID0+IHtcbiAgICBpZiAoc2VlbltyZWdpc3RyeVtrZXldLnByaW9yaXR5XSkge1xuICAgICAgY29uc29sZS5sb2coYEVSUk9SOiBjb25mbGljdCBiZXR3ZWVuICR7a2V5fSBhbmQgJHtzZWVuW3JlZ2lzdHJ5W2tleV0ucHJpb3JpdHldfWApO1xuICAgIH1cbiAgICBzZWVuW3JlZ2lzdHJ5W2tleV0ucHJpb3JpdHldID0ga2V5O1xuICB9KTtcbn1cbiJdfQ==
