"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.add = add;
exports.listFormats = listFormats;
exports.get = get;
exports.checkPriorities = checkPriorities;
var registry = {};
var formatList = [];

function sortRegistry() {
  formatList = Object.keys(registry).sort(function (a, b) {
    return registry[b].priority - registry[a].priority;
  }).map(function (n) {
    return registry[n];
  });
}

function add(name, format) {
  registry[name] = format;
  sortRegistry();
}

function listFormats() {
  return formatList;
}

function get(name) {
  return registry[name];
}

function checkPriorities() {
  var seen = {};
  Object.keys(registry).forEach(function (key) {
    if (seen[registry[key].priority]) {
      console.log("ERROR: conflict between " + key + " and " + seen[registry[key].priority]);
    }
    seen[registry[key].priority] = key;
  });
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm9wZXJhdGlvbnMvcmVnaXN0cnkuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7UUFTZ0IsRyxHQUFBLEc7UUFLQSxXLEdBQUEsVztRQUlBLEcsR0FBQSxHO1FBSUEsZSxHQUFBLGU7QUF0QmhCLElBQU0sV0FBVyxFQUFqQjtBQUNBLElBQUksYUFBYSxFQUFqQjs7QUFFQSxTQUFTLFlBQVQsR0FBd0I7QUFDdEIsZUFBYSxPQUFPLElBQVAsQ0FBWSxRQUFaLEVBQ1osSUFEWSxDQUNQLFVBQUMsQ0FBRCxFQUFJLENBQUo7QUFBQSxXQUFVLFNBQVMsQ0FBVCxFQUFZLFFBQVosR0FBdUIsU0FBUyxDQUFULEVBQVksUUFBN0M7QUFBQSxHQURPLEVBRVosR0FGWSxDQUVSLFVBQUMsQ0FBRDtBQUFBLFdBQU8sU0FBUyxDQUFULENBQVA7QUFBQSxHQUZRLENBQWI7QUFHRDs7QUFFTSxTQUFTLEdBQVQsQ0FBYSxJQUFiLEVBQW1CLE1BQW5CLEVBQTJCO0FBQ2hDLFdBQVMsSUFBVCxJQUFpQixNQUFqQjtBQUNBO0FBQ0Q7O0FBRU0sU0FBUyxXQUFULEdBQXVCO0FBQzVCLFNBQU8sVUFBUDtBQUNEOztBQUVNLFNBQVMsR0FBVCxDQUFhLElBQWIsRUFBbUI7QUFDeEIsU0FBTyxTQUFTLElBQVQsQ0FBUDtBQUNEOztBQUVNLFNBQVMsZUFBVCxHQUEyQjtBQUNoQyxNQUFNLE9BQU8sRUFBYjtBQUNBLFNBQU8sSUFBUCxDQUFZLFFBQVosRUFDQyxPQURELENBQ1MsVUFBQyxHQUFELEVBQVM7QUFDaEIsUUFBSSxLQUFLLFNBQVMsR0FBVCxFQUFjLFFBQW5CLENBQUosRUFBa0M7QUFDaEMsY0FBUSxHQUFSLDhCQUF1QyxHQUF2QyxhQUFrRCxLQUFLLFNBQVMsR0FBVCxFQUFjLFFBQW5CLENBQWxEO0FBQ0Q7QUFDRCxTQUFLLFNBQVMsR0FBVCxFQUFjLFFBQW5CLElBQStCLEdBQS9CO0FBQ0QsR0FORDtBQU9EIiwiZmlsZSI6Im9wZXJhdGlvbnMvcmVnaXN0cnkuanMiLCJzb3VyY2VzQ29udGVudCI6WyJjb25zdCByZWdpc3RyeSA9IHt9O1xubGV0IGZvcm1hdExpc3QgPSBbXTtcblxuZnVuY3Rpb24gc29ydFJlZ2lzdHJ5KCkge1xuICBmb3JtYXRMaXN0ID0gT2JqZWN0LmtleXMocmVnaXN0cnkpXG4gIC5zb3J0KChhLCBiKSA9PiByZWdpc3RyeVtiXS5wcmlvcml0eSAtIHJlZ2lzdHJ5W2FdLnByaW9yaXR5KVxuICAubWFwKChuKSA9PiByZWdpc3RyeVtuXSk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBhZGQobmFtZSwgZm9ybWF0KSB7XG4gIHJlZ2lzdHJ5W25hbWVdID0gZm9ybWF0O1xuICBzb3J0UmVnaXN0cnkoKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGxpc3RGb3JtYXRzKCkge1xuICByZXR1cm4gZm9ybWF0TGlzdDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldChuYW1lKSB7XG4gIHJldHVybiByZWdpc3RyeVtuYW1lXTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNoZWNrUHJpb3JpdGllcygpIHtcbiAgY29uc3Qgc2VlbiA9IHt9O1xuICBPYmplY3Qua2V5cyhyZWdpc3RyeSlcbiAgLmZvckVhY2goKGtleSkgPT4ge1xuICAgIGlmIChzZWVuW3JlZ2lzdHJ5W2tleV0ucHJpb3JpdHldKSB7XG4gICAgICBjb25zb2xlLmxvZyhgRVJST1I6IGNvbmZsaWN0IGJldHdlZW4gJHtrZXl9IGFuZCAke3NlZW5bcmVnaXN0cnlba2V5XS5wcmlvcml0eV19YCk7XG4gICAgfVxuICAgIHNlZW5bcmVnaXN0cnlba2V5XS5wcmlvcml0eV0gPSBrZXk7XG4gIH0pO1xufVxuIl0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9
